What we have seen in the previous chapter is our first example of vector bundle, which is just a way to call a vector space depending continuously (or smoothly) on some parameters, for example points on a manifold.

\section{Vector bundles}

\begin{definition}\label{def:vector_bundle}
  A \emph{vector bundle of rank $r$} over a manifold $M$ is a manifold $E$ together with a smooth surjective map $\pi : E \to M$ such that, for all $p\in M$, the following properties hold:
  \begin{enumerate}[(i)]
    \item the \emph{fibre over $p$}, $E_p := \pi^{-1}(p)$, has the structure of vector space of dimension $r$;
    \item there is a neighbourhood $U\subset M$ of $p$ and a diffeomorphism $\varphi: \pi^{-1}(U) \to U \times \R^r$ such that
          \begin{enumerate}
            \item $\pi_1 \circ \varphi = \pi$ where $\pi_1: U\times\R^r\to U$ is the projection on the first factor,
            \item for all $q\in U$, $\varphi\big|_{E_q} : E_q \to \{q\}\times \R^r$ is an isomorphism of vector spaces.
          \end{enumerate}
  \end{enumerate}

  The space $E$ is called the \emph{total space}, the manifold $M$ is the \emph{base space}, $\pi$ its projection and each of the maps $\varphi$ is called \emph{local trivialization}.

  If there exists a trivialization defined on the whole manifold, that is a map $\varphi: E \to M\times \R^r$, such map is called \emph{global trivialization}, the vector bundle is said to be \emph{trivializable} and the bundle $(E, \varphi)$ itself is called \emph{trivial} bundle.
\end{definition}

\begin{example}\label{ex:simple_bundles}
  \begin{itemize}
    \item Perhaps the simplest examples of vector bundle is the trivial vector bundle of rank $1$, often called \emph{trivial line bundle}, $E = M \times \R$ with projection on the first component $\pi_1: E \to M$.
    \item In the same spirit, a trivial vector bundle of rank $r$ over a manifold $M$ is the product space $E = M\times \R^r$ with the projection on the first component $\pi_1: E\to M$.
    \item The tangent bundle $TM$ with its projection to the base $\pi:TM\to M$ is a vector bundle\footnote{Exercise: prove the statement constructing the local diffeomorphisms.}.
          In this case the fibres are the tangent spaces $\pi^{-1}(p) = T_pM$.
          If the tangent bundle of a manifold is trivalisable, then its base manifold is said to be \emph{parallelisable}.
    \item If $\pi_i: E_i\to M_i$, $i=1,2$, are vector bundles, then $\pi = (\pi_1, \pi_2): E_1\times E_2 \to M_1\times M_2$ is another vector bundle, called the \emph{product bundle}, whose fibres are the product of the fibres of the two original bundles.
          A particular example of this is the tangent bundle $T(M_1\times M_2)$, which is diffeomorphic to $TM_1 \times TM_2$.
    \item Other examples will appear throughout the course.
  \end{itemize}
\end{example}

\begin{exercise}
  Show that the dimension of a vector bundle of rank $r$ is $\dim(E) = \dim(M) + r$.
\end{exercise}

\begin{remark}
  In the spirit of getting rid of redundant information and making the language more concise, it is common to refer to a vector bundle $(E, \pi : E \to M)$ only referring to the bundle projection: $\pi : E \to M$.
\end{remark}

\begin{exercise}
  Show that if $\pi:E\to M$ is a vector bundle and $U\subset M$ is an open set, then $\pi\big|_{\pi^{-1}(U)}: \pi^{-1}(U) \to U$ is a vector bundle of the same rank.
\end{exercise}

\begin{example}
  Let $\pi:E \to M$ be a vector bundle of rank $r$.
  Assume that $E$ itself is the base space of another vector bundle $\pi_1: E_1\to E$ of rank $s$.
  Then $\pi\circ\pi_1: E_1 \to M$ is a vector bundle of rank $r+s$ called the \emph{composite bundle}. Indeed, if $\varphi:\pi^{-1}(U)\to U\times\R^r$ is a bundle diffeomorphism for $E$ over $U\subset M$ and $\varphi_1:\pi_1^{-1}(U_1)\to U_1\times\R^s$ is a bundle diffeomorphism for $E_1$ over $U_1\subset E$ such that $V := \pi(U_1)\cap U\neq \emptyset$, then
  \begin{equation}
    \Psi:=(\varphi\circ\pi_1, \varphi_1): (\pi\circ\pi_1)^{-1}(V)\to (U\times\R^r)\times (U_1\times\R^s)
  \end{equation}
  is a bundle diffeomorphism for $\pi\circ\pi_1$ over $W$.

  A particular example of this is the tangent bundle of the tangent bundle: if $M$ is a $n$-manifold, its tangent bundle $TM$ is a $2n$-manifold, and its tangent bundle $T(TM)$ is a vector bundle over $M$ of rank $3n$.
\end{example}

To compare vector bundles it is useful to define the following concept.
\begin{definition}
  An \emph{isomorphism} between two vector bundles $\pi_i: E_i \to M$, $i=1,2$, over the same base space $M$ is a homeomorphism $h:E_1 \to E_2$ which maps every fiber $\pi_1^{-1}(p)$ to the corresponding fiber $\pi_2^{-1}(p)$ by a linear isomorphism.
  The map $h$ is a \emph{diffeomorphism} between vector bundles if it is a diffeomorphism which maps fibres to fibres isomorphically.
  In this case we say that the vector bundles are \emph{diffeomorphic}.
\end{definition}

Since an isomorphism preserves all the structure of a vector bundle, isomorphic bundles are often regarded as the same.

Of course, we can also define subbundles.
%
\begin{marginfigure}[4cm]
  \includegraphics{images/2.10-subbundle.pdf}
\end{marginfigure}
%
\begin{definition}
  Let $\pi:E \to M$ be a rank-$r$ vector bundle and $F\subset E$ a submanifold.
  If for all $p\in M$, the intersection $F_p := F\cap E_p$ is a $k$-dimensional subspace of the vector space $E_p$ and $\pi|_F : F \to M$ defines a rank-$k$ vector bundle, then $\pi|_F: F \to M$ is called a \emph{subbundle} of $E$.
\end{definition}

All the examples given so far are nice and well, but how can we construct these vector bundles?
The first idea that may come to mind, is to  try and mimic the construction we gave of the tangent bundle of a smooth manifold: provided a collection of vector spaces for each point of the manifolds, we need to construct a suitable topology for the whole space, equip the disjoint union of vector spaces with a smooth structure and then construct local trivializations that are compatible with such structure.
Sound quite a mouthful, but turns out to be quite the right approach.

\begin{theorem}\label{thm:bundle_chart_thm}
  Let $M$ be a smooth $n$-manifold without boundary and let $E_p$ be a given $k$-dimensional real vector space for each $p\in M$.
  Define
  \begin{equation}
    E := \bigsqcup_{p\in M} E_p, \qquad
    \pi : E\to M \mbox{ such that } \pi : v_p \in E_p \mapsto p,
  \end{equation}
  and assume the following holds
  \begin{enumerate}[(i)]
    \item there exists an open cover $\{U_\alpha\}_{\alpha\in A}$ of $M$;
    \item for each $\alpha\in A$, there exists a bijection $\varPhi_\alpha: \pi^{-1}(U_\alpha) \to U_\alpha\times\R^k$ whose restriction $\varPhi_\alpha|_{E_p} : E_p \to \{p\}\times\R^k \sim \R^k$ is a linear isomorphism;
    \item for each $\alpha,\beta \in A$ with $U_{\alpha\beta}:=U_\alpha \cap U_\beta \neq \emptyset$, there exists a matrix-valued smooth map $\tau_{\alpha\beta}: U_{\alpha\beta} \to GL(k,\R)$ such that\footnote{Here $\tau_{\alpha\beta}(p) v$ denotes the usual product of the $k\times k$ matrix $\tau_{\alpha\beta}(p)$ with the vector $v\in\R^k$.}
      \begin{align}
        \varPhi_\alpha \circ \varPhi_\beta^{-1} : U_{\alpha\beta}\times\R^k &\to U_{\alpha\beta}\times\R^k\\
                                                  (p, v) & \mapsto (p, \tau_{\alpha\beta}(p) v).
      \end{align}
  \end{enumerate}
  Then $E$ has a unique topology and a smooth structure making it into a smooth manifold without boundary and a smooth rank $k$ vector bundle over $M$ with $\pi$ as its projection and $\{(U_\alpha, \varPhi_\alpha)\}$ as smooth local trivializations.
\end{theorem}
The maps $\tau_{\alpha\beta}$ are called \emph{transition function}s between the local trivializations.
\begin{proof}
  \newthought{Part 1. $E$ has a structure of smooth manifold}.
Let $(U_\alpha, \varphi_\alpha)$ be a smooth structure on $M$ adapted to the given open cover.
We need to use this, and the given maps from the statement, to define charts from $E_p$ to $\R^n\times\R^k$.
For each $p\in M$, choose an open neighbourhood $V_p \subseteq U_\alpha$ for some $\alpha\in A$.
Observe that $\pi^{-1}(V_p) \subseteq E_p$ and $\widetilde{V}_p := \varphi_\alpha(V_p) \subseteq \R^n$ and therefore it may be natural to consider the collection $\{(\pi^{-1}(V_p), \widetilde{\varphi}_p)\mid p\in M\}$, where
\begin{equation}
  \widetilde{\varphi}_p := (\varphi_\alpha\times \id_k) \circ \varPhi_\alpha : \pi^{-1}(V_p) \xrightarrow{\varPhi_\alpha} V_p\times\R^k \xrightarrow{\varphi_\alpha\times \id_k} \widetilde{V}_p\times \R^n,
\end{equation}
as a candidate to apply the Smooth Manifold Lemma~\ref{lem:manifold_chart}.
This would give $E$ both a topology and a smooth structure.

Checking the requirements for the Smooth Manifold Lemma is then relatively straightforward.
First of all, observe that $\widetilde{\varphi}_p$ is a bijection from $\pi^{-1}(V_p)$ onto $\widetilde{V}_p\times\R^k \subseteq \R^{n+k}$ since it is the composition of bijective maps.
By construction, for $p,q\in M$, we have
\begin{equation}
  \widetilde{\varphi}_p(\pi^{-1}(V_p) \cap \pi^{-1}(V_q)) = \phi_p(V_p\cap V_q)\times \R^k
\end{equation}
which is open in $\R^{n+k}$ since $\varphi_p$ is a homeomorphism onto an open $V_p\subseteq\R^n$.
Finally, on the overlap of two charts, there are $\alpha, \beta\in A$ such that
\begin{equation}
  \widetilde{\varphi}_p \circ \widetilde{\varphi}_q^{-1} =
  (\varphi_\alpha \times \id_k) \circ \varPhi_\alpha \circ \varPhi_\beta^{-1} \circ (\varphi_\beta \times \id_k)^{-1}.
\end{equation}
Such transition map is a diffeomorphism since it is the composition of diffeomorphisms.
Therefore properties (i) and (ii) of the theorem are satisfied.

Property (iii) follows from the fact that $M$ is a manifold and thus the open cover $\{V_p | p \in M\}$ has a countable subcover.

We are left with the Hausdorff property (iv).
This can be checked in the same vein as we did for the analogous proof in the case of the tangent bundle:
if two vectors belong to the same space $E_p$, then they belong to one of the charts we have constructed and we can separate them taking the preimages of two disjoint open neighbourhoods of $\R^k$ containing them; if the two points belong to two distinct spaces $E_p$ and $E_q$, $p\neq q$, we can pick two disjoint neighbourhoods $V_p$ and $V_q$ so that their preimages $\pi^{-1}(V_p)$ and $\pi^{-1}(V_q)$ are disjoint coordinate neighbourhoods separating the two points.

With this property also satisfied, Lemma~\ref{lem:manifold_chart} gives $E$ the structure of smooth manifold without boundary.

\newthought{Part 2. The maps $\Phi_\alpha$ define a smooth local trivialization}.
Again, by construction, the maps $\varPhi_\alpha : \pi^{-1}(V_p) \to V_p\times\R^k$ are diffeomorphisms.
Indeed, their coordinate representations with respect to the charts introduced above is just the identity\footnote{Exercise: expand the definitions and show that the following diagram commutes}:
\begin{equation}
  \begin{tikzcd}
    {\pi^{-1}(V_p)} & {V_p\times\R^k} \\
    {\widetilde{V}_p\times\R^k} & {\widetilde{V}_p\times\R^k}
    \arrow["{\varPhi_\alpha}", from=1-1, to=1-2]
    \arrow["{\varphi_p\times\id_k}", from=1-2, to=2-2]
    \arrow["{\widetilde{\varphi}_p}"', from=1-1, to=2-1]
    \arrow["{\id_{n+k}}"', from=2-1, to=2-2]
  \end{tikzcd}.
\end{equation}
In a similar way, the coordinate representation of $\pi : E \to M$ is $\varphi_\alpha \circ \pi \circ \widetilde{\varphi}_\alpha (x,v) = x$, so $\pi$ is smooth.
Finally, $\Phi_\alpha$ satisfies all conditions to be a smooth local trivialization since $\varPhi_\alpha$ is linear by hypothesis and $\pi_1 \circ \varPhi_\alpha = \pi$, which follows from $\varPhi_\alpha(E_p) = \{p\}\times \R^k$.

\newthought{Part 3. The smooth structure is unique}.
Since the $\varPhi_\alpha$ have to be diffeomorphisms onto their images, any other atlas will have to contain the family of charts defined here, and therefore they must be in the same equivalence class, that is, in the same smooth structure.
\end{proof}

\begin{exercise}
  What is $\tau_{\alpha\beta}$ in the case of $TM$?
\end{exercise}

The previous exercise should already give you a hint at why property (iii) of the Theorem~\ref{thm:bundle_chart_thm} has such a strange form involving $k\times k$ invertible matrices.
The following lemma should clarify definitively why this is natural.

\begin{lemma}\label{lem:transition_vb}
  Let $\pi:E \to M$ be a smooth vector bundle of rank $k$ over $M$. Let $U,V\subseteq M$, $U\cap V\neq \emptyset$.
  If $\varPhi : \pi^{-1}(U) \to U \times \R^k$ and $\Psi: \pi^{-1}(V) \to V \times \R^k$ are two smooth local trivializations of $E$, then there exists a smooth map $\tau: U\cap V \to GL(k, \R)$ such that
  \begin{align}
    \varPhi\circ\Psi^{-1} : (U\cap V)\times\R^k &\to (U\cap V)\times \R^k \to (U\cap V)\times \R^k \\
                            (p,v) &\mapsto (p, \tau(p) v).
  \end{align}
\end{lemma}
\begin{exercise}
  Prove Lemma~\ref{lem:transition_vb}.

  \textit{\small Hint: It is helpful to show commutativity of a diagram involving $\varPhi$, $\Psi$ and projections from their joint domain and codomains.}
\end{exercise}

Of course, there is no reason to restrict ourselves to manifolds without boundary.
\begin{exercise}
  Restate and prove Theorem~\ref{thm:bundle_chart_thm} for the case of a manifold $M$ with boundary.
\end{exercise}

We saw in Example~\ref{ex:simple_bundles} that given two vector bundles on some manifolds there is a way to construct a product bundle out of them over the product of the manifolds.
In the special case of two bundles $E^1 \to M$ and $E^2 \to M$ over the same manifold, this would lead to $E^1 \times E^2 \to M \times M$.
It is natural to ask oneself if we can make a construction that combines multiple vector bundles over the same base space to a new bundle over that same base space.
This is call the Whitney sum of the bundles.
\begin{exercise}[Whitney sum]\label{ex:whitney}
  Let $\pi^1 : E^1 \to M$ and $\pi^2 : E^2 \to M$ be two smooth vector bundles over $M$ of rank $k^1$ and $k^2$ respectively.
  The Whitney sum $E^1 \oplus E^2$ of $E^1$ and $E^2$ is the smooth vector bundle $\pi: E^1 \oplus E^2 \to M$ whose fibers
  \begin{equation}
    (E^1 \oplus E^2)_p = \pi^{-1}(p) =: (E^1_p \oplus E^2_p)
  \end{equation}
  are the direct sum of the fibers of the respective bundles, with the projection $\pi: (E^1\oplus E^2)_p \mapsto p$.

  Show, using Theorem~\ref{thm:bundle_chart_thm}, that $\pi: E^1 \oplus E^2 \to M$ defines a smooth vector bundle of rank $k^1 + k^2$.\\
  \textit{\small
    Hint: given two local trivializations $\varPhi$ and $\varPsi$ for $E^1\oplus E^2$, then $\varPhi\circ\varPsi^{-1}$ should have the form
    \begin{equation}
      \varPhi\circ\varPsi^{-1}(p, (v^1, v^2)) = (p, \tau(p)(v^1, v^2)), \quad
      \tau(p) :=
      \begin{pmatrix}
        \tau^1(p) & 0 \\
        0 & \tau^2(p)
      \end{pmatrix}.
    \end{equation}
    Here $\tau^1$ and $\tau^2$ denote transition functions of $E^1$ and $E^2$ respectively.
  }
\end{exercise}

\newthought{There are various useful generalizations of vector bundles}.
The \emph{fiber bundles} are bundles in which $\R^n$ is replaced by a more general manifold and are rather pervasive in mathematics and physics.
A special class of fiber bundles, the \emph{principal bundles}, have this manifold also be a group with a well-defined action on the bundle.
Even if we will not discuss these examples in the notes, Appendix~\ref{appendix:Lie} contains a brief discussion of group actions, Lie groups and Lie algebras with pointers to extra literature.

\section{Sections of vector bundles}

\begin{marginfigure}
  \includegraphics{2_7-bdl_section.pdf}
  \caption{A useful mnemonic to remember what is a section, is to imagine it as a cross-section of the bundle.}
\end{marginfigure}

\begin{definition}
  A \emph{section} of a vector bundle $\pi:E \to M$ is a smooth map $S:M \to E$ such that $\pi\circ S = \id_M$. We denote the set of all sections of $E$ by $\Gamma(E)$.

  If, in the definition, $M$ is replaced by $U\subset M$, the section is called \emph{local section}. The set of local sections on $U\subset M$ is denoted $\Gamma(E|_U)$.
\end{definition}

\begin{remark}
  A careful look at the definition shows that vector fields are sections of $TM$, indeed $\fX(M) \equiv \Gamma(TM)$.
  This is a useful way to start understanding the bundle terminology: in some sense, sections of vector bundles are a generalisation of vector fields.
\end{remark}

\begin{example}[Vector fields in $\R^n$]
If $E = M\times \R^r$, $M\subset\R^n$, then for any smooth map $F: M\to\R^r$ we have a section $S\in\Gamma(E)$ defined by $S(p) = (p, F(p))$. This is a classical euclidean vector field: a map that associates vectors to points (see Figure~\ref{fig:vectorfield-rn}).
  Notice, in particular, that functions $f\in C^\infty(M)$ are sections of the trivial bundle $M\times\R$:
  \begin{equation}
    \Gamma(M\times\R) \simeq C^\infty(M).
  \end{equation}
\end{example}

One can sometimes distinguish non--isomorphic bundles by looking at the complement of their zero section: since any vector bundle isomorphism $h:E_1\to E_2$ must map the zero section of $E_1$ onto the zero section of $E_2$, the complements of the zero sections in $E_1$ and $E_2$ must be homeomorphic.

\begin{marginfigure}
    \includegraphics{2_9-vfield.pdf}
    \caption{A vector field ``attaches'' vectors to points.}%
    \label{fig:vectorfield-rn}
\end{marginfigure}

Even though, as we have seen, \emph{locally} $TM$ is diffeomorphic to $M\times\R^n$, this is not true in general with one exception.
\begin{exercise}\label{ex:trivializable}
  Let $M$ be a smooth $n$-manifold that can be covered by a single smooth chart.
  Show that $TM$ is diffeomorphic to $M\times\R^n$ (without applying Proposition~\ref{prop:trivializable}).
\end{exercise}

\begin{definition}
  A \emph{local frame} of a bundle $\pi:E\to M$ of rank $r$ is a family of $r$ local sections $\{S_1, \ldots, S_r\}\subset\Gamma(E|_U)$ such that $\{S_1(p), \ldots, S_r(p)\}$ is a basis for $E_p$ for all $p\in U$.
  If $U=M$ then $\{S_1, \ldots, S_r\}$ is called \emph{global frame}.
  Sometimes, the sections $S_j$ are called \emph{basis sections}.
\end{definition}

\begin{example}
  A chart on a $n$-manifold $M$ with local coordinates $(x^i)$ yields a local frame $\left\{\frac{\partial}{\partial x^1}, \ldots, \frac{\partial}{\partial x^n}\right\}$ of the tangent bundle $TM$.
\end{example}

In the spirit of what we have seen about the previous example, we have the following proposition.

\begin{proposition}
  Let $\pi:E \to M$ be a smooth vector bundle and $X:M\to E$ a section.
  If $\{S_i\}$ is a smooth local frame for $E$ over an open subset $U\subseteq M$, then $X$ is smooth on $U$ if and only if its component functions with respect to $\{S_i\}$ are smooth.
\end{proposition}
\begin{proof}
  Let $\varphi:\pi^{-1}(U) \to U\times\R^k$ be the local trivialization associated with the local frame $\{S_i\}$.
  Since $\varphi$ is a diffeomorphism, $X$ is smooth on $U$ if and only if $\varphi\circ X$ is smooth on $U$.
  If $\{X^i\}$ denotes the component function of $X$ with respect to $S_i$, then $\varphi\circ X (p) = (p, (X^1(p), \ldots, X^k(p)))$, so $\varphi\circ X$ is smooth if and only if the component functions $\{X^i\}$ are smooth.
\end{proof}

That is, given a local frame $\{S_1, \ldots, S_r\}\subset\Gamma(E|_U)$ of a vector bundle $\pi: E \to M$ we can express any section $X\in\Gamma(E)$ as a linear combination of elements of the frame:
\begin{equation}
  X = X^i S_i \quad\mbox{on }U,
\end{equation}
where $X^i\in C^\infty(U)$, $i=1,\ldots,r$.
Which was to be expected: after all, for each $p\in U\subset M$, the local frame is a basis for $E_p$.

\begin{proposition}\label{prop:trivializable}
  A vector bundle $\pi: E\to M$ is trivializable if and only if it admits a global frame.
\end{proposition}
\begin{proof}
  Let $\varphi: E \to M\times\R^r$ be a global trivialization and $\{e_1, \ldots, e_r\}$ the canonical basis for $\R^r$.
  For $q\in M\times\R^r$, $\{S_1(q), \ldots, S_r(q)\} := \left\{\varphi^{-1}\big|_q(e_1), \ldots, \varphi^{-1}\big|_q(e_r) \right\}$ is a global frame for $E$ (why?).

  Conversely, let $\{S_1, \ldots, S_r\}$ be a global frame for $E$. Then
  \begin{equation}
    \varphi: E \to M\times\R^r, \quad
    \left(p, v^i S_i(p)\right) \mapsto \left(p, (v^1, \ldots, v^r)\right),
  \end{equation}
  is a global trivialization for $E$.
\end{proof}

\begin{example}
  The cylinder $E = \bS^1\times\R$ is a trivializable vector bundle with $\pi:E\to \bS^1$.
  Incidentally, the cylinder is isomorphic to $T\bS^1$ (why?).
\end{example}

\begin{exercise}
  Let $M$ be a smooth $m$-manifold and $N$ a smooth $n$-manifold.
  Let $F:M\to N$ be an embedding and denote $\widetilde M = F(M)\subset N$.
  \begin{enumerate}
    \item Show that the tangent bundle of $M$ in $N$, given by $T\widetilde M := dF(TM) \subset TN\big|_{\widetilde M}$, is a subbundle of $TN\big|_{\widetilde M}$ by providing explicit local trivializations in terms of the charts $(U, \varphi)$ for $M$.
    \item Assume that there exist a smooth function $\Phi:N\to\R^{n-m}$ such that $\widetilde M := \{p\in N \mid \Phi(p) = 0\}$ and $d\Phi_p$ has full rank for all $p\in\widetilde M$. Prove that\footnote{Here $T\,N|_{\widetilde{M}}$ denotes the tangent bundle of $N$ restricted to the base points in $\widetilde{M}$.}
      \begin{equation}
        T\widetilde{M} = \left\{(p,v)\in T\,N|_{\widetilde{M}} \mid v\in\ker(d\Phi_p)\right\}.
      \end{equation}
  \end{enumerate}
\end{exercise}

