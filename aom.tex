\documentclass[nobib, a4paper]{tufte-book}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{2}
\usepackage{microtype, ifluatex, ifxetex}
%Next block avoids bug, from  http://tex.stackexchange.com/a/200725/1913 
\ifx\ifxetex\ifluatex\else % if lua- or xelatex http://tex.stackexchange.com/a/140164/1913
  \usepackage{fontspec}
  \setmainfont[Renderer=Basic, Numbers=OldStyle, Scale = 1.0]{TeX Gyre Pagella}
  \setsansfont[Renderer=Basic, Scale=0.90]{TeX Gyre Heros}
  \setmonofont[Renderer=Basic]{TeX Gyre Cursor}

  % \setmainfont[Mapping=tex-text,Numbers=OldStyle]{Bembo Std}
  % \setsansfont[Mapping=tex-text,Numbers=OldStyle,Scale=MatchLowercase]{Gill Sans}
  % \setmonofont[Mapping=tex-text,Scale=MatchLowercase]{DejaVu Sans Mono}

  \renewcommand{\textls}[2][5]{%
    \begingroup\addfontfeatures{LetterSpace=#1}#2\endgroup
  }
  \renewcommand{\allcapsspacing}[1]{\textls[15]{#1}}
  \renewcommand{\smallcapsspacing}[1]{\textls[10]{#1}}
  \renewcommand{\allcaps}[1]{\textls[15]{\MakeTextUppercase{#1}}}
  \renewcommand{\smallcaps}[1]{\smallcapsspacing{\scshape\MakeTextLowercase{#1}}}
  \renewcommand{\textsc}[1]{\smallcapsspacing{\textsmallcaps{#1}}}
\fi

\usepackage{graphicx} % allow embedded images
  \setkeys{Gin}{width=\linewidth,totalheight=\textheight,keepaspectratio}
  \graphicspath{{images/}} % set of paths to search for images
\usepackage{amsmath,amssymb,amsthm,amsfonts,ulem,tikz}  % extended mathematics
\usepackage{booktabs} % book-quality tables
\usepackage{units}    % non-stacked fractions and better unit spacing
\usepackage{multicol} % multiple column layout facilities
\usepackage{fancyvrb,xcolor} % extended verbatim environments
  \fvset{fontsize=\normalsize}% default font size for fancy-verbatim environments
\usepackage{tikz,tikz-cd,bbm,mathbbol}
\DeclareSymbolFontAlphabet{\mathbbl}{bbold} %let's you use \mathbbl{k} for a field k
\hypersetup{colorlinks} %puts color to hyperlinks
\setcounter{secnumdepth}{2} 
\usepackage{enumerate}
\usepackage{mathabx}
\usepackage{mathtools}
\mathtoolsset{showonlyrefs, mathic}
\usepackage[english]{babel}
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,    
    urlcolor=Cerulean,
    linkcolor = ForestGreen,
}
\usepackage[toc]{appendix}

\newcounter{dummy} %so that \pageref works properly
\usepackage[absolute]{textpos}
\setlength{\TPHorizModule}{\paperwidth} \setlength{\TPVertModule}{\paperheight}


\usetikzlibrary{decorations.pathreplacing,} %for braces with itemize
\newcommand{\tikzmark}[1]{\tikz[baseline={(#1.base)},overlay,remember picture] \node[outer sep=0pt, inner sep=0pt] (#1) {\phantom{A}};}
\usetikzlibrary{cd}

% Standardize command font styles and environments
\newcommand{\doccmd}[1]{\texttt{\textbackslash#1}}% command name -- adds backslash automatically
\newcommand{\docopt}[1]{\ensuremath{\langle}\textrm{\textit{#1}}\ensuremath{\rangle}}% optional command argument
\newcommand{\docarg}[1]{\textrm{\textit{#1}}}% (required) command argument
\newcommand{\docenv}[1]{\textsf{#1}}% environment name
\newcommand{\docpkg}[1]{\texttt{#1}}% package name
\newcommand{\doccls}[1]{\texttt{#1}}% document class name
\newcommand{\docclsopt}[1]{\texttt{#1}}% document class option name
\newenvironment{docspec}{\begin{quote}\noindent}{\end{quote}}% command specification environment

\newcommand{\adj}[4]{\begin{tikzcd}[ampersand replacement=\&, column sep=4ex]
					  	   #1 \colon #2	\ar[yshift=+.6ex]{r}
					  	\& #3 \colon #4	\ar[yshift=-.4ex]{l}
					 \end{tikzcd}}

\usepackage{etoolbox}
\newcommand{\addQEDstyle}[2]{
  \AtBeginEnvironment{#1}{\pushQED{\qed}\renewcommand{\qedsymbol}{#2}}
  \AtEndEnvironment{#1}{\popQED}
}

\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\addQEDstyle{definition}{$\lozenge$}
\newtheorem{conjecture}[theorem]{Conjecture}
\addQEDstyle{conjecture}{$(\clubsuit)uit$}

\theoremstyle{remark}
\newtheorem{example}[theorem]{Example}
\addQEDstyle{example}{$\lozenge$}
\newtheorem{remark}[theorem]{Remark}
\addQEDstyle{remark}{$\lozenge$}
\newtheorem{notation}[theorem]{Notation}
\addQEDstyle{notation}{$\lozenge$}

\usepackage{oplotsymbl}
\newtheorem{exercise}[theorem]{Exercise}
\addQEDstyle{exercise}{$\starlet$}
\newtheorem{problem}[theorem]{Problem}
\addQEDstyle{problem}{$\starlet$}

\usepackage[
    type={CC},
    modifier={by-nc-sa},
    version={4.0},
]{doclicense}

\usepackage[dvipsnames]{xcolor}
\usepackage[many]{tcolorbox}

%\usepackage[numbers, sort]{natbib}
\usepackage[style=alphabetic,natbib=true,sorting=anyt]{biblatex}
%\setlength{\bibsep}{3pt}
%\renewcommand{\bibfont}{\small}
\usepackage{doi}
\addbibresource{aom.bib}

\newcommand{\cA}{\mathcal{A}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cD}{\mathcal{D}}
\newcommand{\cE}{\mathcal{E}}
\newcommand{\cL}{\mathcal{L}}
\newcommand{\cO}{\mathcal{O}}
\newcommand{\cH}{\mathcal{H}}
\newcommand{\cI}{\mathcal{I}}
\newcommand{\cT}{\mathcal{T}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cU}{\mathcal{U}}
\newcommand{\cX}{\mathcal{X}}

%\newcommand{\bC}{\mathbb{C}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\RP}{\mathbb{RP}}
\newcommand{\bS}{\mathbb{S}}
\newcommand{\bT}{\mathbb{T}}

\newcommand{\fX}{\mathfrak{X}}
\newcommand{\fg}{\mathfrak{g}}
\newcommand{\fh}{\mathfrak{h}}

\newcommand{\bx}{\bm{x}}
\newcommand{\bp}{\bm{p}}
\newcommand{\bv}{\bm{v}}

\DeclareFontFamily{U}{MnSymbolC}{}
\DeclareSymbolFont{MnSyC}{U}{MnSymbolC}{m}{n}
\DeclareFontShape{U}{MnSymbolC}{m}{n}{
    <-6>  MnSymbolC5
   <6-7>  MnSymbolC6
   <7-8>  MnSymbolC7
   <8-9>  MnSymbolC8
   <9-10> MnSymbolC9
  <10-12> MnSymbolC10
  <12->   MnSymbolC12}{}
\DeclareMathSymbol{\iprod}{\mathbin}{MnSyC}{'270}

\let\d\relax
\DeclareMathOperator{\d}{d}
\DeclareMathOperator{\D}{D}
\DeclareMathOperator{\diff}{Diff}
\DeclareMathOperator{\Id}{Id}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\diag}{diag}
\let\mod\relax
\DeclareMathOperator{\mod}{mod}
\DeclareMathOperator{\curl}{curl}
\DeclareMathOperator{\Vol}{Vol}
\DeclareMathOperator{\eval}{eval}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\sgn}{sgn}

\DeclareMathOperator{\Alt}{Alt}

\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\Ad}{Ad}

\newcommand{\todo}[1]{\footnote{\textcolor{red}{#1}}}
\newcommand{\TODO}{\textcolor{red}{\hrulefill}}

\title{Analysis\\ \noindent
on\\ \noindent
Manifolds
}
\author{Marcello Seri}
\publisher{Bernoulli Institute\\ \noindent
A.Y. 2020--2021\\ \noindent 
\MakeLowercase{\texttt{m.seri@rug.nl}}
}

\begin{document}
\maketitlepage

\newpage

\begin{fullwidth}
    ~\vfill
    \thispagestyle{empty}
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{\baselineskip}
    Copyright \copyright\ \the\year\ \thanklessauthor
    
    \par Version 0.9.8 -- \today

    \vfill
    \small{\doclicenseThis}
\end{fullwidth}
    
\pagenumbering{roman}
\tableofcontents
\cleardoublepage

\pagenumbering{arabic}
\chapter*{Introduction}
\addcontentsline{toc}{chapter}{Introduction}

At the entry for \emph{Mathematical analysis}, our modern source of truth -- Wikipedia -- says

\begin{quotation}
  \emph{Mathematical analysis} is the branch of mathematics dealing with limits and related theories, such as differentiation, integration, measure, infinite series, and analytic functions.

  These theories are usually studied in the context of real numbers and functions. Analysis evolved from calculus, which involves the elementary concepts and techniques of analysis. Analysis may be distinguished from geometry; however, it can be applied to any space of mathematical objects that has a definition of nearness (a topological space) or specific distances between objects (a metric space). 
\end{quotation}

\newthought{In this sense}, our course will focus on generalizing the concepts of differentiation, integration and, up to some extent, differential equations on spaces that are more general than the standard Euclidean space.

This said, the Euclidean space $\R^n$ is \emph{the} prototype of all manifolds: it won't just be our simplest example, we will see that locally every manifold looks like a Euclidean space.

Euclidean spaces, and the Riemannian charts that you encountered in the \href{http://www.rolandvdv.nl/G20/}{Geometry course}, have a very strong property: they can be described with a set of \emph{global} coordinates.
Even though this means that all computations are explicit, it does make it harder to distinguish \emph{intrinsic}\footnote{I.e. independent from the choice of coordinates.} concepts.
Manifolds will force our hand to work in a \emph{coordinate-free} setting.
We will see that this will unleash a surprising power that will allow us to lay the foundation for a lot of the mathematics that will come in the rest of the curriculum.

These notes will focus on fundamental methods of differential geometry, in particular we will discuss manifolds, differential forms, integration, geometry of submanifolds, real and complex vector bundles, connections.
Throughout the course and the text, I will try to give particular emphasis on the usefulness of these topics in the mathematical theories of classical and quantum mechanics.

If the time permits it, we will give a brief tour of Riemannian metrics and the notion of curvature or of distributions and Frobenius theorem, depending on the preferences expressed in class.
This part of the material will not necessarily be part of the lecture notes\footnote{I will update this paragraph, if needed, in due course.}.

The course relies \emph{heavily} on your knowledge of linear and multilinear algebra, multivariable analysis\footnote{Make sure to review the material of \href{http://www.rolandvdv.nl/M19/}{Multivariable Analysis} before the course begins} and dynamical systems.
This should not come as a surprise: differential geometry and classical mechanics were born together as unique discipline, part of mathematical physics, before the various communities started diverging on their own paths.

An old mathematical joke says that
\begin{quote}
  differential geometry is the study of properties that are invariant under change of notation.
\end{quote}
Sadly, this is \emph{funny because it is alarmingly close to the truth}\footnote{Cit. Lee~\cite{book:lee}.}
You will soon see that different references use different notations. I'll try to stick to the ones you used in the past courses when possible, falling back to~\cite{book:lee} and~\cite{book:tu} and to my personal preference when the latter disagree.

\marginnote{In addition to the reference books, these lecture notes have found deep inspiration from~\cite{lectures:merry,lectures:teufel,lectures:hitchin} (all freely downloadable from the respective authors' websites), and from the book~\cite{book:abrahammarsdenratiu}.}
\newthought{These lecture notes} are by no means comprehensive.
As a reference you can use to the former course textbook~\cite{book:tu} or you can refer to~\cite{book:lee}: it is an incredibly good textbook and contains all the material of the course and much more.
I have requested for~\cite{book:tu} book to be freely available via SpringerLink using the university proxy but this will take some time to become active.
However, you can already freely access Lee's book via the University proxy on \href{https://link.springer.com/book/10.1007/978-1-4419-9982-5}{SpringerLink} and it will provide a very good and extensive reference for this and other future courses.
The book~\cite{book:McInerney} is a nice compact companion that develops most of this course concept in the specific case of $\R^n$ and could provide further examples and food for thoughts.
A colleague recently mentioned also~\cite{book:lang}. I don't know this book but from a brief look it seems to follow a similar path as these lecture notes, so might provide an alternative reference after all.

The idea for the cut that I want to give to this course was inspired by the online \href{https://www.video.uni-erlangen.de/course/id/242}{Lectures on the Geometric Anatomy of Theoretical Physics} by Frederic Schuller, by the lecture notes of Stefan Teufel's Classical Mechanics course~\cite{lectures:teufel} (in German), by the classical mechanics book by Arnold~\cite{book:arnold} and by the Analysis of Manifold chapter in~\cite{book:thirring}.
In some sense I would like this course to provide the introduction to geometric analysis that I wish was there when I prepared my \href{https://www.mseri.me/lecture-notes-hamiltonian-mechanics/}{first edition} of the Hamiltonian mechanics course.

I am extremely grateful to Martijn Kluitenberg for his careful reading of the notes and his useful comments and corrections.
Many thanks also to Huub Bouwkamp, Bram Brongers, Mollie Jagoe Brown, Wietze Koops, Nicol\'as Moro, Luuk de Ridder, Lisanne Sibma, Jordan van Ekelenburg, Hanneke van Harten and Dave Verweg for reporting a number of misprints and corrections.

\mainmatter

\chapter*{Einstein summation convention}
\addcontentsline{toc}{chapter}{Einstein summation convention}

As will become clear soon, sums of the type $\sum_i x^i e_i$ are unavoidably appearing all over the place when working on manifolds.
Therefore, throughout these notes we will apply the \emph{Einstein summation convention}: if the same index\footnote{For example, $i$ in the summation $\sum_i x^i e_i$.} appears exactly twice in a monomial term, once in the lower and once in the upper index position, then that term is understood to be summed over all possible values of that index\footnote{Usually from $1$ to the dimension of the space in question.}.

For instance, the expression
\begin{equation}
  a^{ij}b_l^k e_i e_k
\end{equation}
is a shorthand for
\begin{equation}
  \sum_{i,k} a^{ij}b_l^k e_i e_k.
\end{equation}

In general, we will use lower indices for basis of vector spaces\footnote{E.g., $(e_1,\ldots,e_n)$ could be the standard basis of $\R^n$.}, and upper indices for the components of a vector with respect to a basis\footnote{E.g., the $i$th-coordinate $x^i$ of $x\in\R^n$.}.
\marginnote[10pt]{Since the coordinates of a point $x\in\R^n$ are also its components with respect to the standard basis $(e_1, \ldots, e_n)$, for consistency they will be denoted $(x^1, \ldots, x^n)$ with upper indices.}

Note that an upper index ``in the denominator'' is regarded as a lower index, so the following are to be considered equivalent:
\begin{equation}
  \sum_{i} a^i \frac{\partial}{\partial x^i} = a^i \frac{\partial}{\partial x^i}.
\end{equation}
In fact, the expressions below are all equivalent and commonly used in the differential geometry literature:
\begin{equation}
  \sum_{i} a^i \frac{\partial}{\partial x^i} = a^i \frac{\partial}{\partial x^i} = a^i \partial_{x^i} = a^i \partial_i.
\end{equation}

\chapter{Manifolds}\label{ch:manifolds}
\input{1-manifolds}

\chapter{Tangent bundle}\label{ch:2}
\input{2-tangentbdl}

\chapter{Vector fields}\label{ch:vf}
\input{3-vectorfields}

\chapter{Lie groups and Lie algebras}
\input{3b-liegroups}

\chapter{Cotangent bundle}\label{cg:ctb}
\input{4-cotangentbdl}

\chapter{Tensor fields}\label{cg:tf}
\input{5-tensors}

\chapter{Differential Forms}
\input{6-differentiaforms}

\chapter{Integration of forms}
\input{7-integration}

\begin{appendices}

\chapter{Frobenius theorem}
Integrable and nonintegrable distributions, Contact geometry, Frobenius theorem.

\chapter{Vector bundles and connections}
Hopefully we can cut on differential forms since they were treated in multivariable analysis and get to this.

\end{appendices}

% \begin{appendices}
%   \chapter{Solution to selected exercises}
%   \section{Chapter~\ref{ch:manifolds}}
  
%   \newthought{Exercise~\ref{exe:rntopsp}.}
%   \begin{enumerate}
%     \item[] Hausdorff. For $x\neq y\in\R^n$, let $\epsilon = d(x,y)/3$.
%     Then the two balls $B_x(\epsilon) := \{z\in X \;\mid\; d(z,x)<\epsilon\}$ and $B_y(\epsilon)$ are disjoint open sets containing $x$ and $y$ respectively.
%     \item[] Second countable. As countable basis for the topology we can take the open balls $B_\epsilon(x)$ with rational radii $\epsilon\in\Q$ and centers $x\in\Q^n$.
%   \end{enumerate}
  
% \end{appendices}

\printbibliography
\addcontentsline{toc}{chapter}{Bibliography}
\end{document}